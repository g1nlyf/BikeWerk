# TRAE PROTOCOLS: THE CONSTITUTION OF ACTION

## 1. Decomposition Principle (Принцип Декомпозиции)
- **Rule:** Никогда не пытайся съесть слона целиком.
- **Action:** Любая задача сложнее "исправить опечатку" должна быть разбита на 5-10 атомарных подзадач.
- **Why:** Это позволяет локализовать ошибки, упрощает откат изменений и делает прогресс прозрачным для пользователя.
- **Commit Granularity:** Один логический блок = один шаг. Не смешивай правки UI и Backend-логики в одном действии.

## 2. Deep-Scanning (Глубокое Сканирование)
- **Rule:** Не меняй строку кода, пока не поймешь её контекст.
- **Action:** Перед любым изменением запусти `SearchCodebase` или `Grep` по ключевым символам, чтобы найти все зависимости.
- **Checklist:**
  - Где эта функция вызывается?
  - Какие данные она ожидает?
  - Повлияет ли изменение на другие части системы (например, мобильное приложение или админку)?
- **Why:** "Эффект бабочки" в коде недопустим. Мы строим надежную систему.

## 3. Test-Driven Autonomy (Автономность через Тесты)
- **Rule:** Задача не выполнена, пока не доказано обратное.
- **Action:** Для каждой функциональной задачи (особенно Backend/AI) должен быть создан скрипт проверки (`scripts/verify-X.js`).
- **Standard:** Тест должен имитировать реальный сценарий (например, "Парсинг -> Анализ -> Сохранение").
- **No Mocks (Where Possible):** Используй реальные API и данные, если это безопасно.
- **Why:** Пользователь не должен быть тестировщиком.

## 4. Loop of Perfection (Цикл Совершенства)
- **Rule:** Ошибка — это не конец, а итерация.
- **Action:** Если тест упал:
  1. Проанализируй лог.
  2. Выдвини гипотезу.
  3. Исправь код.
  4. Перезапусти тест.
  5. Повторяй до успеха (Green Light).
- **Limit:** Если после 3 попыток проблема не решена — остановись, переосмысли подход или запроси помощь (поиск документации/альтернатив).

## 5. User-Centric Outcome (Результат для Пользователя)
- **Rule:** Код — это средство, продукт — это цель.
- **Action:** В каждом отчете подчеркивай бизнес-ценность изменений ("Ускорили загрузку на 20%", "Повысили точность оценки цены").
- **Tone:** Профессиональный, уверенный, ориентированный на результат.
